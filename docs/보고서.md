# 효율적 투자 프런티어 재분석 보고서

## 1. 프로젝트 개요
본 보고서는 `temp.csv`에 수록된 삼성전자(005930.KS), 애플(AAPL), 엔비디아(NVDA) 주가 데이터를
활용해 기본 통계를 산출하고, 효율적 투자 프런티어를 재구성한 과정을 정리한다. 외부 패키지 사용이
제한된 환경을 고려해 Python 표준 라이브러리만으로 데이터 파싱과 수치 계산을 수행했으며, 분석
결과는 정적 웹사이트와 SVG 시각화 이미지로 제공된다. 특히 초기 시도에서 효율적 투자 프런티어가
부정확하게 표현되었다는 피드백을 반영해, 전수 탐색 기반의 새 알고리즘으로 그래프를 다시 작성했다.

## 2. 데이터 이해 및 전처리
### 2.1 데이터 구조
원본 CSV는 3행의 헤더를 사용해 가격 지표(종가, 고가, 저가, 거래량 등)와 티커명을 분리한다. 파일
내 각 데이터 행은 "YYYY-MM-DD" 형식의 날짜를 기준으로 세 종목의 시세를 제공하며, 일부 날짜에는
결측치가 존재한다. 분석 스크립트(`scripts/analysis.py`)는 다음 규칙을 적용해 데이터를 정제했다.

1. 헤더 1~2행을 조합해 "티커_지표" 형태의 컬럼 인덱스를 구성한다.
2. "Close" 지표에 해당하는 열만 추출해 종가 시계열을 생성한다.
3. 날짜 파싱 실패, 결측치, 숫자 변환 오류가 발생한 레코드는 자동으로 제외한다.
4. 티커별 데이터는 날짜를 오름차순 정렬한 뒤, 일간 단순 수익률을 계산한다.

### 2.2 관측 기간 및 커버리지
- 최초 날짜: 2023-10-16
- 최종 날짜: 2025-10-10
- 공통 거래일 수: 482일 (세 종목 모두 값이 존재하는 구간 기준)

### 2.3 기술통계 요약
| 지표 | 005930.KS | AAPL | NVDA |
| --- | --- | --- | --- |
| 평균 종가 | 66,471.53 | 209.52 | 115.60 |
| 종가 표준편차 | 9,708.84 | 24.38 | 39.00 |
| 최소/최대 종가 | 48,968.97 / 94,400.00 | 163.82 / 258.10 | 40.30 / 192.57 |
| 평균 일간 수익률 | 0.097% | 0.081% | 0.329% |
| 수익률 표준편차 | 1.93% | 1.77% | 3.21% |
| 최저/최고 일간 수익률 | -10.30% / 7.21% | -9.25% / 15.33% | -16.97% / 18.72% |

삼성전자는 완만한 우상향을 보이나 변동성은 9천 원대 중반으로 비교적 큰 편이다. 애플은 평균 주가가
200달러 전후에서 움직이며 변동성은 20달러 중반 수준이다. 엔비디아는 고성장주 특성상 평균 수익률이
0.33%로 가장 높고, 변동성 역시 3.21%로 크게 나타났다.

## 3. 분석 방법론
### 3.1 표준 라이브러리 활용 전략
외부 의존성 없이 분석을 완료하기 위해 다음과 같은 대안을 적용했다.
- `csv`: 다중 헤더를 수동 파싱해 컬럼을 식별
- `statistics`: 평균, 중앙값, 표준편차, 공분산 계산
- `math`: 제곱근, 무한대 처리 등 수치 연산
- `json`: 분석 요약 저장(`outputs/analysis_summary.json`)
- 직접 구현: 공분산 행렬 구축, 포트폴리오 전수 탐색, SVG 그래프 렌더러

### 3.2 수익률 및 공분산 계산
각 종목에 대해 일간 단순 수익률 \( r_t = \frac{P_t}{P_{t-1}} - 1 \) 을 계산하고, 가장 짧은
시계열 길이에 맞춰 동기화했다. 공분산은 샘플 공분산 공식을 적용했으며, 기대 수익률은 일간 수익률의
단순 평균으로 추정했다. 공분산 행렬은 효율적 투자 프런티어 계산과 단일 자산 위험 추정(\(\sigma_i\))에
동시에 사용되었다.

### 3.3 포트폴리오 탐색 및 효율적 투자 프런티어
- 가중치 해상도: 0.02(2%)
- 제약 조건: 세 종목 가중치 합계 = 1, 공매도 불허(가중치 ≥ 0)
- 탐색 방식: 중첩 루프를 통해 가능한 모든 가중치 조합 생성
- 기대 수익률 계산: \( E[R_p] = \sum_i w_i E[R_i] \)
- 분산 계산: \( \sigma_p^2 = \sum_i \sum_j w_i w_j \text{Cov}_{ij} \)
- 프런티어 추출: 기대 수익률 오름차순 정렬 후, 더 낮은 위험을 제공하는 조합만을 순차적으로 유지

초기 그래프가 잘못되었다는 피드백을 해결하기 위해, 단순 회귀선 대신 위의 전수 탐색 결과를 기반으로
지배되지 않는 포트폴리오를 다시 선별했다. 또한 개별 자산(단독 투자) 위치를 동일한 좌표계에 표시해
비교가 가능하도록 구성했다.

### 3.4 시각화 설계
외부 그래픽 라이브러리 없이도 재사용 가능한 결과물을 제공하기 위해 SVG를 직접 생성했다.
- 좌표 변환 함수를 정의해 위험/수익률 범위를 그래픽 좌표로 매핑
- 산점도는 연한 파란색 원으로 표현해 전체 탐색 결과를 배경 정보로 제공
- 효율적 투자 프런티어는 진한 자홍색 선과 포인트로 강조
- 개별 자산은 녹색 마커와 텍스트 라벨로 명시
- 한글 가독성을 위해 기본 폰트에 Pretendard 계열을 우선 지정

## 4. 결과 해석
### 4.1 효율적 투자 프런티어 형태
재작성된 그래프는 애플 비중을 높일수록 위험이 줄어드는 구간과, 엔비디아 비중을 포함해 기대 수익을
높이는 구간이 뚜렷이 구분된다. 저위험 구간은 애플 단독 투자(기대 수익률 0.081%, 위험 1.77%)에서 시작해
삼성전자를 일부 혼합하며 위험을 점진적으로 감소시키는 흐름을 보여준다. 반면, 수익률을 크게 높이려면
엔비디아 비중을 늘려야 하나 위험이 가파르게 증가하므로 투자자의 위험 선호도에 따라 균형점이 달라진다.

### 4.2 자산별 기여도
- **005930.KS**: 상대적으로 높은 위험을 보이나, 변동성이 애플 대비 조금 높고 엔비디아보다는 낮아
  중간 완충재 역할을 한다. 기대 수익률이 0.097%로 무난한 편.
- **AAPL**: 위험이 가장 낮아 포트폴리오의 안정성을 담당한다. 단독 투자에서도 효율적 프런티어에 위치한다.
- **NVDA**: 높은 성장성 덕분에 기대 수익률이 가장 높지만 변동성이 커서, 포트폴리오 상단부의 수익 확대용으로
  활용된다.

### 4.3 전략적 시사점
1. **보수적 투자자**: 애플 중심 비중(80% 이상)에 삼성전자를 소폭 섞으면 위험을 크게 높이지 않고도 약간의
   수익률 상향이 가능하다.
2. **중립적 투자자**: 세 종목을 고르게 배분할 경우(예: 0.4 / 0.4 / 0.2) 위험 2%대 중반, 기대 수익률 0.17% 수준의
   균형 잡힌 조합을 얻을 수 있다.
3. **공격적 투자자**: 엔비디아 비중을 40% 이상으로 늘려가면 기대 수익률이 0.25% 이상으로 상승하지만, 위험은
   3%를 상회하므로 변동성 감내 능력이 필요하다.

## 5. 웹사이트 및 자동화 산출물
### 5.1 정적 대시보드
- `site/index.html`: 분석 요약, 핵심 통계, 효율적 프런티어 이미지를 포함한 메인 페이지
- `site/styles.css`: 카드형 레이아웃, 그리드 시스템, 반응형 스타일 정의
- `site/assets/efficient_frontier.svg`: 최신 알고리즘으로 생성한 SVG 그래프

### 5.2 실행 흐름
1. `python scripts/analysis.py` 실행 → 통계 산출물(JSON, CSV, SVG) 생성
2. `python serve.py` 실행 → `site/` 디렉터리를 정적 웹 서버로 제공
3. 브라우저에서 `http://localhost:8000` 접속 → 업데이트된 그래프와 수치를 즉시 확인

서버 스크립트는 `http.server` 모듈을 활용해 추가 의존성 없이 동작하며, Ctrl+C 입력 시 안전하게 종료된다.

## 6. 한계와 향후 과제
- **격자 해상도**: 현재 2% 단위로 가중치를 탐색하기 때문에, 실제 최적점과 약간의 오차가 있을 수 있다.
  향후에는 선형대수 풀이 또는 더 세밀한 격자 간격(예: 1% 이하)을 적용해 정밀도를 높일 수 있다.
- **거래비용 미반영**: 수수료와 세금이 포함되지 않았으므로, 실투자 시에는 추가 비용을 고려해야 한다.
- **데이터 결측**: 일부 날짜에 결측치가 존재하며, 본 분석은 해당 날짜를 단순 제외한다. 보간 또는 보강 데이터를
  활용하면 더 안정적인 시계열을 확보할 수 있다.
- **통화 단위 혼합**: 삼성전자는 KRW, 애플과 엔비디아는 USD로 거래되므로, 환율 변동을 반영하지 않은 채 단순 비교했다.
  환헤지 전략이나 통화 변환을 고려하면 더 현실적인 포트폴리오 구성이 가능하다.

## 7. 결론
본 프로젝트는 제한된 환경에서도 효율적 투자 프런티어를 산출하고 시각화할 수 있음을 보여준다. 표준 라이브러리만으로도
데이터 정제, 공분산 계산, 전수 탐색 기반 프런티어 추출, SVG 렌더링이 가능하며, 이를 통해 프런티어 그래프의 정확성을
다시 확보했다. 웹 대시보드와 보고서를 통해 분석 결과를 다양한 채널로 전달할 수 있으며, 추가 최적화와 환율 보정이 이루어진다면
실무 적용 가능성도 충분하다.
